<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>A simple map</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />
<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
  .leaflet-popup-content { height: 200px; overflow : auto; }
</style>
<link rel="ufos" type="application/json" href="./data/ufos_data.geojson">
</head>
<body>

<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />

<div id='map'></div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiYWxwaGEtYmV0YS1zb3VwIiwiYSI6ImxMaVFfVTAifQ.VD93-nQ8FuT4VsPyh8LbBw';
// var map = L.mapbox.map('map', 'mapbox.streets')
//     .setView([40, -74.50], 9);
var map = L.mapbox.map('map', 'alpha-beta-soup.cda5ee4e').setView([-41.2889, 174.7772], 6);

var ufo_icon = L.icon({
    iconUrl: './style/icon__ufo.svg',
    iconSize: [35, 35] // size of the icon
});

$.getJSON($('link[rel="ufos"]').attr("href"), function(data) {
    var ufos = L.geoJson(data, {
      onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.description);
      },
      pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: ufo_icon});
      }
    });
  ufos.addTo(map);
});
</script>

</body>
</html>
